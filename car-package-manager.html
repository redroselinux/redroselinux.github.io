<!DOCTYPE html>
<html>
<head>
  <style>
body {
  margin: 2em;
  padding: 50px
}

section {
  margin-top: 4em;
  padding: 1em 0;
}

pre, code {
  background-color: rgb(24, 24, 24);
  color: rgb(230, 230, 230);
  font-family: monospace;
  border: 1px solid rgb(60, 60, 60);
  padding: 0.8em;
  display: block;
  overflow-x: auto;
  white-space: pre;
}
  </style>
  <meta charset="UTF-8">
  <title>Car Package Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header class="navbar" id="navbar">
      <img src="assets/redrose-logo-transparent.png" height="40" width="40"><p>Redrose Linux <a href="./docs.html" style="color:rgb(255,60,60)">Docs</a> <a href="https://github.com/redroselinux/" style="color:rgb(255,60,60)">Github</a> <a href=".waitlist" style="color:rgb(255,60,60)">Waitlist</a></p>
    </header>

<section>
  <h1>Car</h1>
  <p>Package manager for Redrose Linux.</p>

  <h2>Roadmap</h2>
  <ul>
    <li>[x] Basic functionality</li>
    <li>[x] Basic versioning</li>
    <li>[ ] More advanced versioning</li>
    <li>[x] Mirrors</li>
    <li>[x] Website with all packages</li>
    <li>[ ] .car tarballs for offline install</li>
  </ul>

  <h2>Syntax</h2>
  <pre><code>car get|delete|update|search|updatelist|init

car get &lt;package&gt; [--noconfirm]
car delete &lt;package&gt;
car update &lt;package&gt;
car search &lt;package&gt;
car updatelist
car init
</code></pre>

  <h2>Creating Hooks</h2>
  <ol>
    <li>Add file to <code>.config/car/post-inst-hooks</code></li>
    <li>Create the file</li>
  </ol>
  The only required function in run(). That is the function, that will be ran, obviously.

  <h2>Making Repos</h2>
  <p>Open the file at /home/user/.config/mirrors.car. You will see things similar to this:</p>
  <pre><code>:base:
install_script = https://raw.githubusercontent.com/crust-project/car-binary-storage/main/
packagelist = https://raw.githubusercontent.com/crust-project/car/main/existing-packages.txt
:end:
</code></pre>
<p>Copy and paste one of the repos. To set up a repo, you need:
  <ul>
    <li>Package list</li>
    <li>Actual packages</li>
  </ul>
<p>The package list is easy to set up. Make a file that will have the packages,
  divided by a newline. Example: </p>
  <pre><code>package1
package2
package3
</code></pre>
  <p>Edit the packagelist value in mirrors.car.</p>
  <p>This can be basically any URL that CURL supports. Which means you can use file://, yes.</p>
  
  <p>The install scripts are gonna be a directory, where are other directories named by the packages that own them.</p>
  <code><pre>my-repo>
    my-package>
        install_script <- See #Creating Packages
        index.html <- Docs for the package
    </pre></code>
    </p>Again, this can be file://, so yes, you can make a fully local repo.
  <h2>Creating Packages</h2>
  <p>Create a file named <code>install_script</code>.</p>
  <pre><code>version = "0.0.1"

def beforeinst():
    print("Runs before installation")

def deps():
    print(":: No dependencies required")

def build():
    print(":: No build required")

def install():
    pass

def postinst():
    pass
</code></pre>

  <h2>Submitting Packages</h2>
  <ol>
    <li>Fork <code>car-binary-storage</code></li>
    <li>Create a package directory with <code>install_script</code></li>
    <li>Follow naming rules (-bin, -git, -stable)</li>
    <li>Submit a pull request</li>
  </ol>

  <p><a href="index.html" style="color:rgb(255,60,60)">‚Üê Back to Docs Home</a></p>
</section>

</body>
</html>
